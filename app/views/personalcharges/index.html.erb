<%= render "search" %>
<%= link_to t('export_data'), personalcharges_path(format: 'xls')  %> ||
<%= link_to t('new_personalcharge'), new_personalcharge_path  %>

<table  class="table table-bordered">
  <tr>
  	<th><%= t('user') %></th>  
	  <th><%= t('period') %></th>
    <th><%= t('charge_date') %></th>
    <th><%= t('job_code') %></th>
    <th><%= t('hours') %></th>
    <th><%= t('including_ot_hours') %></th>
    <th><%= t('desc') %></th>
    <th><%= t('state') %></th>
    <th colspan="4"><%= t('operations') %></th>
  </tr>
  <%= render @personalcharges %>
</table>

<%= will_paginate @personalcharges %>

<div>
  <h3>check&amp; auto insert Self study</h3>
  <p>This action will check all working hours and auto project by self study hours</p>
  <%= simple_form_for(:project_period, url: auto_complete_hours_personalcharges_path, :html => { :method => :get }) do |f| %>
    <%= f.input :period_id, collection: Period.order("number desc") %>
    <%= f.input :prj_id, collection: Project.all %>
    <%= f.input :period_hours %>
    <%= f.button :submit, '提交' %>
  <% end %>
</div>
<hr/>
<div>
  <h3>check OT</h3>
  <%= form_for(:admin, :url => check_ot_personalcharges_path, :html => { :method => :get }) do |f| %>
    Period:<%= select("", "period_id",
      Period.all.order("number desc").collect {|p| [ p.number, p.id ] }, { :include_blank => false }) %>
    Period hours: <%= text_field_tag "period_hours","0" %>
    <%= submit_tag '提交' %>
  <% end %>
</div>